saturation_table={"saturation pressure":[0.004, 0.006, 0.01, 0.015, 0.023, 0.033, 0.048, 0.067, 0.093, 0.126, 0.168, 0.221, 0.287, 0.368, 0.466, 0.584, 0.725, 0.891, 1.013, 1.085, 1.31, 1.57, 1.867, 2.206, 2.59, 3.022, 3.507, 4.047, 4.648, 5.312, 6.044, 6.849, 7.73, 8.692, 9.739, 10.875, 12.107, 13.438, 14.874, 16.42, 18.081, 19.865, 21.778, 23.826, 26.019, 28.366, 30.88, 33.578],"saturation_temperature":[-100, -95, -90, -85, -80, -75, -70, -65, -60, -55, -50, -45, -40, -35, -30, -25, -20, -15, -11.76, -10, -5, 0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130],"h_f":[-6.395, 3.036, 12.549, 22.144, 31.823, 41.587, 51.439, 61.38, 71.413, 81.54, 91.764, 102.086, 112.512, 123.042, 133.682, 144.433, 155.3, 166.286, 173.481, 177.395, 188.632, 200.0, 211.504, 223.149, 234.94, 246.881, 258.98, 271.241, 283.672, 296.28, 309.073, 322.06, 335.251, 348.657, 362.291, 376.169, 390.309, 404.732, 419.464, 434.54, 450.001, 465.904, 482.329, 499.389, 517.263, 536.259, 557.006, 581.255],"h_g":[428.19, 433.861, 439.62, 445.465, 451.392, 457.397, 463.479, 469.633, 475.855, 482.142, 488.489, 494.893, 501.349, 507.853, 514.4, 520.987, 527.607, 534.257, 538.587, 540.933, 547.628, 554.337, 561.056, 567.778, 574.497, 581.207, 587.901, 594.57, 601.207, 607.802, 614.344, 620.823, 627.223, 633.528, 639.718, 645.766, 651.643, 657.313, 662.735, 667.857, 672.618, 676.937, 680.699, 683.741, 685.808, 686.459, 684.814, 678.439],"h_f":[-6.395, 3.036, 12.549, 22.144, 31.823, 41.587, 51.439, 61.38, 71.413, 81.54, 91.764, 102.086, 112.512, 123.042, 133.682, 144.433, 155.3, 166.286, 173.481, 177.395, 188.632, 200.0, 211.504, 223.149, 234.94, 246.881, 258.98, 271.241, 283.672, 296.28, 309.073, 322.06, 335.251, 348.657, 362.291, 376.169, 390.309, 404.732, 419.464, 434.54, 450.001, 465.904, 482.329, 499.389, 517.263, 536.259, 557.006, 581.255]}


superheated_table={"saturation_temperature":[-100, -95, -90, -85, -80, -75, -70, -65, -60, -55, -50, -45, -40, -35, -30, -25, -20, -15, -11.76, -10, -5, 0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130],"saturation_pressure":[0.004, 0.006, 0.01, 0.015, 0.023, 0.033, 0.048, 0.067, 0.093, 0.126, 0.168, 0.221, 0.287, 0.368, 0.466, 0.584, 0.725, 0.891, 1.013, 1.085, 1.31, 1.57, 1.867, 2.206, 2.59, 3.022, 3.507, 4.047, 4.648, 5.312, 6.044, 6.849, 7.73, 8.692, 9.739, 10.875, 12.107, 13.438, 14.874, 16.42, 18.081, 19.865, 21.778, 23.826, 26.019, 28.366, 30.88, 33.578],"superheated_temperature":{"0.0":[428.19, 433.861, 439.62, 445.465, 451.392, 457.397, 463.479, 469.633, 475.855, 482.142, 488.489, 494.893, 501.349, 507.853, 514.4, 520.987, 527.607, 534.257, 538.587, 540.933, 547.628, 554.337, 561.056, 567.778, 574.497, 581.207, 587.901, 594.57, 601.207, 607.802, 614.344, 620.823, 627.223, 633.528, 639.718, 645.766, 651.643, 657.313, 662.735, 667.857, 672.618, 676.937, 680.699, 683.741, 685.808, 686.459, 684.814, 678.439],"5.0":[433.892, 439.664, 445.524, 451.471, 457.501, 463.611, 469.8, 476.062, 482.395, 488.796, 495.26, 501.783, 508.362, 514.992, 521.67, 528.39, 535.148, 541.941, 546.364, 548.762, 555.609, 562.474, 569.355, 576.244, 583.137, 590.027, 596.908, 603.773, 610.614, 617.424, 624.192, 630.909, 637.562, 644.137, 650.615, 656.978, 663.204, 669.267, 675.141, 680.793, 686.188, 691.277, 696.004, 700.295, 704.054, 707.16, 709.459, 710.759],"10.0":[439.693, 445.565, 451.526, 457.574, 463.708, 469.923, 476.218, 482.59, 489.035, 495.549, 502.129, 508.772, 515.473, 522.229, 529.036, 535.889, 542.784, 549.717, 554.234, 556.684, 563.679, 570.699, 577.738, 584.791, 591.853, 598.918, 605.981, 613.035, 620.073, 627.088, 634.071, 641.013, 647.902, 654.727, 661.472, 668.124, 674.665, 681.077, 687.343, 693.438, 699.338, 705.01, 710.418, 715.518, 720.258, 724.58, 728.416, 731.688],"15.0":[445.591, 451.563, 457.626, 463.777, 470.014, 476.335, 482.737, 489.218, 495.774, 502.402, 509.099, 515.861, 522.685, 529.566, 536.502, 543.487, 550.518, 557.59, 562.2, 564.7, 571.843, 579.014, 586.209, 593.423, 600.65, 607.887, 615.126, 622.363, 629.591, 636.803, 643.991, 651.147, 658.26, 665.32, 672.316, 679.236, 686.067, 692.796, 699.407, 705.883, 712.204, 718.347, 724.285, 729.987, 735.422, 740.552, 745.337, 749.729],"20.0":[451.588, 457.661, 463.825, 470.078, 476.419, 482.846, 489.356, 495.946, 502.614, 509.357, 516.171, 523.052, 529.999, 537.005, 544.069, 551.186, 558.351, 565.562, 570.264, 572.814, 580.102, 587.423, 594.771, 602.143, 609.533, 616.937, 624.349, 631.764, 639.176, 646.578, 653.963, 661.323, 668.649, 675.933, 683.166, 690.338, 697.439, 704.457, 711.379, 718.191, 724.876, 731.417, 737.793, 743.982, 749.96, 755.703, 761.181, 766.358],"25.0":[457.684, 463.857, 470.123, 476.48, 482.926, 489.459, 496.077, 502.777, 509.558, 516.415, 523.346, 530.347, 537.416, 544.548, 551.739, 558.987, 566.287, 573.635, 578.428, 581.028, 588.46, 595.929, 603.429, 610.956, 618.506, 626.074, 633.654, 641.243, 648.833, 656.419, 663.994, 671.551, 679.082, 686.581, 694.04, 701.45, 708.802, 716.087, 723.292, 730.406, 737.415, 744.305, 751.058, 757.66, 764.091, 770.332, 776.362, 782.149],"30.0":[463.879, 470.154, 476.522, 482.982, 489.534, 496.174, 502.901, 509.712, 516.605, 523.578, 530.626, 537.747, 544.938, 552.196, 559.515, 566.894, 574.327, 581.812, 586.695, 589.344, 596.92, 604.534, 612.184, 619.864, 627.571, 635.3, 643.046, 650.803, 658.567, 666.332, 674.091, 681.839, 689.569, 697.274, 704.949, 712.584, 720.173, 727.706, 735.173, 742.563, 749.866, 757.068, 764.158, 771.121, 777.944, 784.61, 791.101, 797.391],"35.0":[470.174, 476.551, 483.022, 489.587, 496.245, 502.992, 509.829, 516.752, 523.758, 530.846, 538.013, 545.254, 552.568, 559.95, 567.397, 574.906, 582.473, 590.094, 595.066, 597.765, 605.482, 613.241, 621.039, 628.871, 636.732, 644.619, 652.527, 660.45, 668.383, 676.322, 684.261, 692.194, 700.116, 708.021, 715.902, 723.752, 731.564, 739.33, 747.042, 754.689, 762.262, 769.751, 777.145, 784.433, 791.603, 798.642, 805.534, 812.254],"40.0":[476.57, 483.049, 489.625, 496.295, 503.059, 509.916, 516.862, 523.897, 531.018, 538.222, 545.507, 552.869, 560.306, 567.813, 575.388, 583.027, 590.726, 598.482, 603.544, 606.291, 614.149, 622.052, 629.996, 637.977, 645.991, 654.033, 662.1, 670.185, 678.285, 686.395, 694.509, 702.622, 710.73, 718.827, 726.907, 734.962, 742.987, 750.974, 758.916, 766.803, 774.629, 782.383, 790.058, 797.642, 805.127, 812.5, 819.747, 826.846],"45.0":[483.067, 489.65, 496.331, 503.107, 509.979, 516.945, 524.003, 531.15, 538.386, 545.707, 553.11, 560.593, 568.153, 575.785, 583.488, 591.257, 599.088, 606.979, 612.129, 614.924, 622.922, 630.967, 639.056, 647.185, 655.349, 663.545, 671.767, 680.012, 688.276, 696.552, 704.838, 713.127, 721.416, 729.699, 737.97, 746.223, 754.451, 762.649, 770.809, 778.924, 786.987, 794.99, 802.925, 810.784, 818.557, 826.235, 833.803, 841.241],"50.0":[489.667, 496.355, 503.141, 510.024, 517.005, 524.081, 531.251, 538.512, 545.863, 553.301, 560.824, 568.428, 576.111, 583.869, 591.698, 599.597, 607.56, 615.585, 620.823, 623.667, 631.803, 639.989, 648.221, 656.496, 664.809, 673.156, 681.532, 689.934, 698.358, 706.798, 715.251, 723.713, 732.178, 740.64, 749.096, 757.539, 765.964, 774.363, 782.732, 791.064, 799.352, 807.59, 815.77, 823.884, 831.926, 839.884, 847.747, 855.494],"55.0":[496.371, 503.163, 510.056, 517.048, 524.138, 531.325, 538.607, 545.983, 553.45, 561.006, 568.648, 576.374, 584.18, 592.063, 600.021, 608.048, 616.143, 624.301, 629.627, 632.519, 640.792, 649.119, 657.493, 665.912, 674.371, 682.867, 691.396, 699.952, 708.534, 717.135, 725.753, 734.382, 743.018, 751.656, 760.291, 768.918, 777.531, 786.125, 794.695, 803.234, 811.737, 820.197, 828.608, 836.964, 845.256, 853.475, 861.611, 869.644],"60.0":[503.179, 510.078, 517.078, 524.179, 531.379, 538.678, 546.074, 553.565, 561.149, 568.823, 576.585, 584.433, 592.362, 600.371, 608.455, 616.612, 624.838, 633.129, 638.542, 641.481, 649.892, 658.357, 666.872, 675.434, 684.038, 692.682, 701.36, 710.069, 718.805, 727.565, 736.343, 745.136, 753.939, 762.748, 771.558, 780.363, 789.159, 797.942, 806.705, 815.443, 824.151, 832.824, 841.455, 850.038, 858.566, 867.032, 875.423, 883.722],"65.0":[510.092, 517.099, 524.208, 531.418, 538.73, 546.142, 553.652, 561.258, 568.959, 576.752, 584.635, 592.605, 600.658, 608.792, 617.004, 625.289, 633.645, 642.069, 647.569, 650.555, 659.102, 667.704, 676.359, 685.063, 693.811, 702.6, 711.426, 720.285, 729.174, 738.089, 747.025, 755.979, 764.945, 773.921, 782.9, 791.879, 800.853, 809.818, 818.767, 827.698, 836.604, 845.48, 854.321, 863.121, 871.873, 880.57, 889.202, 897.75],"70.0":[517.112, 524.227, 531.446, 538.767, 546.191, 553.717, 561.341, 569.064, 576.883, 584.796, 592.799, 600.891, 609.068, 617.328, 625.666, 634.08, 642.566, 651.121, 656.708, 659.742, 668.423, 677.162, 685.955, 694.799, 703.689, 712.622, 721.595, 730.602, 739.642, 748.709, 757.8, 766.911, 776.038, 785.176, 794.321, 803.469, 812.616, 821.758, 830.888, 840.004, 849.101, 858.172, 867.215, 876.222, 885.188, 894.106, 902.965, 911.749],"75.0":[524.24, 531.464, 538.793, 546.227, 553.764, 561.403, 569.144, 576.984, 584.921, 592.953, 601.078, 609.292, 617.593, 625.978, 634.443, 642.985, 651.601, 660.288, 665.96, 669.04, 677.856, 686.731, 695.661, 704.644, 713.675, 722.75, 731.867, 741.021, 750.209, 759.426, 768.669, 777.934, 787.218, 796.515, 805.823, 815.136, 824.452, 833.765, 843.072, 852.367, 861.648, 870.908, 880.144, 889.35, 898.521, 907.649, 916.726, 925.734],"80.0":[531.477, 538.811, 546.252, 553.798, 561.449, 569.203, 577.06, 585.018, 593.074, 601.226, 609.472, 617.809, 626.234, 634.744, 643.336, 652.006, 660.751, 669.568, 675.326, 678.452, 687.401, 696.411, 705.478, 714.598, 723.768, 732.984, 742.244, 751.542, 760.875, 770.24, 779.633, 789.05, 798.487, 807.941, 817.408, 826.883, 836.363, 845.844, 855.321, 864.791, 874.25, 883.693, 893.116, 902.514, 911.881, 921.211, 930.495, 939.716],"85.0":[538.823, 546.268, 553.821, 561.481, 569.247, 577.117, 585.091, 593.166, 601.341, 609.614, 617.982, 626.441, 634.99, 643.625, 652.344, 661.141, 670.015, 678.962, 684.805, 687.978, 697.059, 706.203, 715.404, 724.661, 733.969, 743.325, 752.725, 762.165, 771.643, 781.153, 790.694, 800.26, 809.848, 819.455, 829.077, 838.711, 848.351, 857.996, 867.64, 877.28, 886.912, 896.532, 906.135, 915.718, 925.275, 934.799, 944.281, 953.707],"90.0":[546.28, 553.838, 561.504, 569.278, 577.159, 585.145, 593.237, 601.431, 609.725, 618.119, 626.608, 635.191, 643.863, 652.624, 661.468, 670.393, 679.395, 688.471, 694.398, 697.617, 706.83, 716.106, 725.442, 734.834, 744.279, 753.772, 763.311, 772.892, 782.512, 792.166, 801.851, 811.564, 821.301, 831.059, 840.833, 850.621, 860.419, 870.223, 880.03, 889.835, 899.636, 909.428, 919.207, 928.968, 938.708, 948.419, 958.093, 967.715],"95.0":[553.848, 561.519, 569.299, 577.188, 585.185, 593.289, 601.498, 609.811, 618.226, 626.74, 635.351, 644.057, 652.853, 661.738, 670.708, 679.76, 688.889, 698.094, 704.106, 707.37, 716.714, 726.122, 735.591, 745.117, 754.697, 764.326, 774.003, 783.723, 793.482, 803.277, 813.106, 822.963, 832.846, 842.752, 852.676, 862.616, 872.568, 882.529, 892.494, 902.461, 912.425, 922.384, 932.333, 942.269, 952.185, 962.077, 971.936, 981.748],"100.0":[561.529, 569.314, 577.209, 585.214, 593.327, 601.549, 609.876, 618.309, 626.844, 635.479, 644.212, 653.04, 661.96, 670.97, 680.065, 689.243, 698.5, 707.832, 713.927, 717.237, 726.711, 736.25, 745.85, 755.509, 765.223, 774.988, 784.8, 794.657, 804.554, 814.489, 824.458, 834.458, 844.485, 854.536, 864.608, 874.697, 884.8, 894.913, 905.034, 915.158, 925.283, 935.405, 945.519, 955.623, 965.712, 975.779, 985.817, 995.812]}}
a="bbbsvv"


def interpolate(x1,x2,x3,y1,y3):
    return (((x2-x3)/(x1-x3)*(y1-y3))+y3)

def get_saturated_liquid_enthalpy(t):
    i=0
    while t> saturation_table["saturation_temperature"][i]:
        i=i+1
    if t==saturation_table["saturation_temperature"][i]:
        enthalpy=saturation_table["h_f"][i]
    else:
        x1=saturation_table["saturation_temperature"][i-1]
        x2=t
        x3=saturation_table["saturation_temperature"][i]
        y1=saturation_table["h_f"][i-1]
        y3=saturation_table["h_f"][i]
        enthalpy=interpolate(x1,x2,x3,y1,y3)
    return enthalpy
def get_superheat_enthalpy(p,t):
    superheat_temp_values=[0.0,5.0,10.0,15.0,20.0,25.0,30.0,35.0,40.0,45.0,50.0,55.0,60.0,65.0,70.0,75.0,80.0,85.0,90.0,95.0,100.0]
    i=0
    while p> superheated_table["saturation_pressure"][i]:
        i=i+1
    if p==superheated_table["saturation_pressure"][i]:
        saturation_temp=superheated_table["saturation_temperature"][i]
        superheat_temp=float(abs(saturation_temp-t))
        if superheat_temp in superheat_temp_values:
            enthalpy=superheated_table["superheated_temperature"][f"{superheat_temp}"][i]
        else:
            j=0
            while superheat_temp> superheat_temp_values[j]:
                j=j+1
            x1=superheat_temp_values[j-1]
            x2=superheat_temp
            x3=superheat_temp_values[j]
            y1=superheated_table["superheated_temperature"][f"{superheat_temp_values[j-1]}"][i]
            y3=superheated_table["superheated_temperature"][f"{superheat_temp_values[j]}"][i]
            enthalpy=interpolate(x1,x2,x3,y1,y3)
    else:
        x1=superheated_table["saturation_pressure"][i-1]
        x2=p
        x3=superheated_table["saturation_pressure"][i]
        y1=superheated_table["saturation_temperature"][i-1]
        y3=superheated_table["saturation_temperature"][i]
        saturation_temp=interpolate(x1,x2,x3,y1,y3)
        superheat_temp=float(abs(saturation_temp-t))
        k=0
        while superheat_temp> superheat_temp_values[k]:
            k=k+1
        if superheat_temp == superheat_temp_values[k]:
            x1=superheated_table["saturation_pressure"][i-1]
            x2=p
            x3=superheated_table["saturation_pressure"][i]
            y1=superheated_table["superheated_temperature"][f"{superheat_temp}"][i-1]
            y3=superheated_table["superheated_temperature"][f"{superheat_temp}"][i]
            enthalpy=interpolate(x1,x2,x3,y1,y3)
        else:
            x1=superheated_table["saturation_pressure"][i-1]
            x2=p
            x3=superheated_table["saturation_pressure"][i]
            y1=superheated_table["superheated_temperature"][f"{superheat_temp_values[k-1]}"][i-1]
            y3=superheated_table["superheated_temperature"][f"{ superheat_temp_values[k-1]}"][i]
            lower_enthalpy=interpolate(x1,x2,x3,y1,y3)
            x1=superheated_table["saturation_pressure"][i-1]
            x2=p
            x3=superheated_table["saturation_pressure"][i]
            y1=superheated_table["superheated_temperature"][f"{superheat_temp_values[k]}"][i-1]
            y3=superheated_table["superheated_temperature"][f"{ superheat_temp_values[k]}"][i]
            higher_enthalpy=interpolate(x1,x2,x3,y1,y3)
            x1=superheat_temp_values[k-1]
            x2=superheat_temp
            x3=superheat_temp_values[k]
            y1=lower_enthalpy
            y3=higher_enthalpy
            enthalpy=interpolate(x1,x2,x3,y1,y3)
    return enthalpy
print("PRESS 1 FOR ACTUAL  VAPOUR COMPRESSION CYCLE")
print("PRESS 2 FOR SOLAR ASSISTED VAPOUR COMPRESSION CYCLE")
opt=input(">>>")
while opt not in ["1","2"] :
    print("please enter a valuid command")
    opt=input(">>>")
if opt == "1":
    while True:
        p1= float(input("insert the value of p1(bar)"))
        t1=float(input("insert the value of t1(°c)"))
        p2= float(input("insert the value of p2(bar)"))
        t2=float(input("insert the value of t2(°c)"))
        t3=float(input("insert the value of t3(°c)"))
        h1=get_superheat_enthalpy(p1,t1)
        h2=get_superheat_enthalpy(p2,t2)
        h3=get_saturated_liquid_enthalpy(t3)
        h4=h3
        COP=(h1-h4)/(h2-h1)
        compressor_work=(h2-h1)
        print(COP)
        print(compressor_work)
if opt=="2":
    while True:
        p1= float(input("insert the value of p1(bar)"))
        t1=float(input("insert the value of t1(°c)"))
        p2= float(input("insert the value of p2(bar)"))
        t2=float(input("insert the value of t2(°c)"))
        p3= float(input("insert the value of p3(bar)"))
        t3=float(input("insert the value of t3(°c)"))
        t4=float(input("insert the value of t4(°c)"))
        h1=get_superheat_enthalpy(p1,t1)
        h2=get_superheat_enthalpy(p2,t2)
        h3=get_superheat_enthalpy(p3,t3)
        h4=get_saturated_liquid_enthalpy(t4)
        h5=h4
        COP=((h1-h5)+(h4-h3))/(h2-h1)
        compressor_work=(h2-h1)
        print(COP)
        print(compressor_work)
    
